# shambhala API _(draft)_

<br />




## constructor

* Class definition.

    ```javascript
    interface Options: {
        token?: string;
    }

    class Shambhala {
        constructor (url: string, opts?: Options)
    }
    ```


* Invocation.

    ```javascript
    let shambhala = new Shambhala("https://secrets.example.com/", {
        token: "jwt.io.token"
    })
    ```

<br />




## administrative method calls

* Get shambhala version.

    ```javascript
    async function getVersion(): string
    ```


* Get associated `public keys` for a given `account id`. Returns array
    of `string`.

    ```javascript
    async function getPublicKeys(accountId: string): string[]
    ```

<br />




## onboarding method calls

* Generate account. Returns a `string` with an `account id` (`G_PUBLIC`).

    ```javascript
    async function generateAccount(): string
    ```


* Associate account. Returns a `string` with an `account id` (`G_PUBLIC`).

    ```javascript
    async function associateAccount(accountId: string): string
    ```


* Generate set of signing keys for a given `account id`. Returns array
    of `string` with `C_PUBLIC` and `S_PUBLIC`.

    ```javascript
    async function generateSigningKeys(accountId: string): string[]
    ```


* Generate **signed** key association transaction, ready to be submitted
    to the _stellar network_. If such transaction can't be generated
    an exception is thrown. This operation can be invoked maximum once.

    ```javascript
    async function generateSignedKeyAssocTX(
        accountId: string
    ): Uint8Array  // StellarSDK.xdr.TransactionEnvelope
    ```


* Generate key association transaction. This transaction has to be signed
    with appropriate `SECRET` before it can be sent to the _stellar network_.

    ```javascript
    async function generateKeyAssocTX(
        accountId: string
    ): Uint8Array  // StellarSDK.xdr.TransactionEnvelope
    ```

<br />




## signing method calls

* Return `true` if transaction can be signed for `account id`,
    `false` otherwise.

    ```javascript
    async function canSignFor(accountId: string): boolean
    ```


* On behalf on `account id` sign a given `transaction` (provided as
    `StellarSDK.xdr.TransactionSignatureBase`). Returns array of
    `StellarSDK.xdr.DecoratedSignature`.

    ```javascript
    async function signTransaction(
        accountId: string,
        transaction: Uint8Array
    ): Uint8Array[]
    ```
